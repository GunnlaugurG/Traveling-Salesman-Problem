!function(t){function e(e){for(var r,u,a=e[0],s=e[1],c=e[2],f=0,p=[];f<a.length;f++)u=a[f],i[u]&&p.push(i[u][0]),i[u]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r]);for(l&&l(e);p.length;)p.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,a=1;a<n.length;a++){var s=n[a];0!==i[s]&&(r=!1)}r&&(o.splice(e--,1),t=u(u.s=n[0]))}return t}var r={},i={0:0},o=[];function u(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.m=t,u.c=r,u.d=function(t,e,n){u.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},u.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},u.t=function(t,e){if(1&e&&(t=u(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)u.d(n,r,function(e){return t[e]}.bind(null,r));return n},u.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return u.d(e,"a",e),e},u.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},u.p="";var a=window.webpackJsonp=window.webpackJsonp||[],s=a.push.bind(a);a.push=e,a=a.slice();for(var c=0;c<a.length;c++)e(a[c]);var l=s;o.push([101,1]),n()}({101:function(t,e,n){"use strict";n.r(e);n(27),n(30),n(31),n(69),n(70);console.log("Draw up and running");function r(t,e,n,r){t.beginPath(),t.arc(e,n,6,0,2*Math.PI),t.fillStyle=r?"red":"white",t.fill()}var i={drawLine:function(t,e){t.beginPath(),t.moveTo(e.fromX,e.fromY),t.lineTo(e.toX,e.toY),t.lineWidth="2",t.strokeStyle="lightgreen",t.stroke()},clear:function(t,e){t.clearRect(0,0,e.width,e.height)},drawDots:function(t,e){r(t,e[0].x,e[0].y,!0);for(var n=1;n<e.length;n++)r(t,e[n].x,e[n].y,!1)}};n(72),n(78),n(80),n(82),n(83),n(88),n(58);function o(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(t,e,n,r,i,o,u){try{var a=t[o](u),s=a.value}catch(t){return void n(t)}a.done?e(s):Promise.resolve(s).then(r,i)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.c=document.getElementById("canvas"),this.ctx=this.c.getContext("2d"),this.route={points:[],edge:[],distance:0},this.tempRoute={points:[],edge:[],distance:0},this.numberOfCities=300,this.running=!1,this.timeOut=10}var e,n,r;return e=t,(n=[{key:"clearRoute",value:function(){this.running=!1,this.route.points=[],this.route.edge=[],this.route.distance=0,this.tempRoute.points=[],this.tempRoute.edge=[],this.tempRoute.distance=0,i.clear(this.ctx,this.c)}},{key:"updateCitiCount",value:function(t){this.numberOfCities=t,console.log("numberOf cities: "+this.numberOfCities)}},{key:"solve",value:function(){this.running=!0,this.twoOpt()}},{key:"swap",value:function(t,e){for(var n=0;n<t;n++)this.tempRoute.points[n]=this.route.points[n];for(var r=0,i=t;i<=e;i++)this.tempRoute.points[i]=this.route.points[e-r],r++;for(var o=e+1;o<this.route.points.length;o++)this.tempRoute.points[o]=this.route.points[o];this.updateRoute(this.tempRoute)}},{key:"twoOpt",value:function(){var t,e=(t=regeneratorRuntime.mark(function t(){var e,n,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=!0,n=this.route.points.length;case 2:if(!e||!this.running){t.next=29;break}e=!1,r=1;case 5:if(!(r<n-1)){t.next=26;break}if(this.running){t.next=8;break}return t.abrupt("break",26);case 8:i=r+1;case 9:if(!(i<n)){t.next=22;break}if(this.running){t.next=12;break}return t.abrupt("break",22);case 12:if(this.swap(r,i),!(this.tempRoute.distance<this.route.distance)){t.next=18;break}return e=!0,this.route.points=o(this.tempRoute.points),t.next=18,this.timer(this.route);case 18:case 19:i++,t.next=9;break;case 22:case 23:r++,t.next=5;break;case 26:t.next=2;break;case 29:this.updateRoute(this.route),this.running=!1,document.getElementById("spinner").style.visibility="hidden";case 33:case"end":return t.stop()}},t,this)}),function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(t){u(o,r,i,a,s,"next",t)}function s(t){u(o,r,i,a,s,"throw",t)}a(void 0)})});return function(){return e.apply(this,arguments)}}()},{key:"timer",value:function(){var t=this;return new Promise(function(e,n){setTimeout(function(){t.updateRoute(t.route),e()},t.timeOut)})}},{key:"updateRoute",value:function(t){var e;t.edge=[],t.distance=0,i.clear(this.ctx,this.c);for(var n=0;n<t.points.length;n++)t.points.length-1!==n?(e=this.generateVert(n,n+1,t),i.drawLine(this.ctx,e)):(e=this.generateVert(n,0,t),i.drawLine(this.ctx,e));i.drawDots(this.ctx,this.route.points),this.updateDistance()}},{key:"generatePoints",value:function(t){for(var e,n=0;n<t;n++)e={x:Math.floor(800*Math.random()+1),y:Math.floor(800*Math.random()+1)},this.route.points.push(e)}},{key:"setRouteFromFile",value:function(t){this.clearRoute(),this.route.points=o(t),this.updateRoute(this.route)}},{key:"calculateLength",value:function(t,e){return Number(Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)))}},{key:"updateDistance",value:function(){document.getElementById("distance").innerHTML="Distance: "+this.route.distance.toFixed(1)}},{key:"generateVert",value:function(t,e,n){var r={fromX:n.points[t].x,fromY:n.points[t].y,toX:n.points[e].x,toY:n.points[e].y};return n.distance+=this.calculateLength(n.points[t],n.points[e]),n.edge.push(r),r}}])&&a(e.prototype,n),r&&a(e,r),t}();n(95);function c(t,e,n,r,i,o,u){try{var a=t[o](u),s=a.value}catch(t){return void n(t)}a.done?e(s):Promise.resolve(s).then(r,i)}var l,f,p={readFile:(l=regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("Reading file"),t.next=4,h(e);case 4:return n=t.sent,r=n.split("\n").map(function(t){return t.trim().split(" ")}).map(function(t){return{x:Number(t[0]),y:Number(t[1])}}),t.abrupt("return",r);case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}},t,null,[[0,9]])}),f=function(){var t=this,e=arguments;return new Promise(function(n,r){var i=l.apply(t,e);function o(t){c(i,n,r,o,u,"next",t)}function u(t){c(i,n,r,o,u,"throw",t)}o(void 0)})},function(t){return f.apply(this,arguments)})};function h(t){var e=new FileReader;return new Promise(function(n,r){e.onerror=function(){e.abort(),r(new DOMException("Problem parsing input file."))},e.onload=function(){n(e.result)},e.readAsText(t)})}function d(t,e,n,r,i,o,u){try{var a=t[o](u),s=a.value}catch(t){return void n(t)}a.done?e(s):Promise.resolve(s).then(r,i)}!function(t){console.log("JS up and running");var e=new s;function n(){var t=document.getElementById("cities"),n=t.value;console.log(n),n<=2?(alert("number of cities needs to be more then 2"),t.value=48):(e.updateCitiCount(n),e.clearRoute(),e.generatePoints(n),e.updateRoute(e.route))}n(),document.getElementById("restart").addEventListener("click",function(t){n()}),document.getElementById("solve").addEventListener("click",function(t){document.getElementById("spinner").style.visibility="visible",e.solve()}),document.getElementById("generate").addEventListener("click",function(t){n()}),document.getElementById("delay").addEventListener("change",function(t){e.timeOut=document.getElementById("delay").value}),document.getElementById("file").addEventListener("change",function(){var t,n=(t=regeneratorRuntime.mark(function t(n){var r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.target.files[0],t.next=3,p.readFile(r);case 3:i=t.sent,e.setRouteFromFile(i);case 5:case"end":return t.stop()}},t)}),function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function u(t){d(o,r,i,u,a,"next",t)}function a(t){d(o,r,i,u,a,"throw",t)}u(void 0)})});return function(t){return n.apply(this,arguments)}}())}(window)},69:function(t,e,n){}});
//# sourceMappingURL=app.cf06ef6d.js.map